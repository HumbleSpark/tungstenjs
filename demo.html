<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tungsten.js Demo</title>
</head>
<body>

<div id="appwrapper"></div>

<script src="http://cdn.ractivejs.org/latest/ractive.js"></script>
<script src="dist/tungsten.js"></script>
<script src="dist/adaptor.js"></script>
<script>
    // Template strings; usually these are in separate files
    var rawTemplates = {
        app: {
            content: '<div><h1>Hello, {{name}}</h1></div><br>{{>footer}}',
            partials: ['footer']
        },
        footer: {content: '<strong>footer</strong>'}
    }, compiledTemplates = {};

    // Compile templates; usually this is done at build time.  Don't change this code.
    var templateNames = Object.keys(rawTemplates);
    for (var i = 0; i < templateNames.length; i++) {
        var parsed = Ractive.parse(rawTemplates[templateNames[i]].content, {
            stripComments: false,
            preserveWhitespace: true
        });
        var partialsList = (function() {
            var p = {};
            if(rawTemplates[templateNames[i]].partials && rawTemplates[templateNames[i]].partials.length) {
                for (var j = 0; j < rawTemplates[templateNames[i]].partials.length; j++) {
                    p[rawTemplates[templateNames[i]].partials[j]] = rawTemplates[templateNames[i]].partials[j];
                }
            }
            return p;
        }());
        compiledTemplates[templateNames[i]] = new tungsten._Template(parsed.t, partialsList);
    }
    // Initialize application
    var AppView = tungsten.View.extend({});
    var AppModel = tungsten.Model.extend({});
    var template = compiledTemplates.app;
    var view = new AppView({
        el: '#appwrapper',
        template: template,
        model: new AppModel({name: 'world'}),
        dynamicInitialize: true
    });
</script>
</body>
</html>